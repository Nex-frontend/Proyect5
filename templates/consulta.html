{% extends 'base.html' %}
{% block content %}
<h2>Página de consulta</h2>
<form method="get"> {# Formulario de búsqueda #}
  <input type="text" name="q" value="{{ q }}" placeholder="Buscar por RFC, Nombre, Cadena1, QNA, etc." /> {# Input para la búsqueda #}
  <button type="submit" class="btn-entrar">Buscar</button> {# Botón de búsqueda #}
  {# Mostrar total de registros: usar 'total' si el view lo proporciona, si no usar results|length #}
  <br>
  <small>Total de registros: <strong>{% if total is not None %}{{ total }}{% else %}{{ results|length }}{% endif %}</strong></small>
  {% if q %}
    <br>
    <small>Mostrando resultados para: <strong>{{ q }}</strong></small>
  {% endif %} {# Mostrar resultados #}
  <br>
</form>
{# aqui puedo hacer cambioa los nombres de las columnas y filtros de la tabla #}
<table role="grid"> {# Tabla de resultados #}
  <thead> {# Encabezado de la tabla #}
    <tr> {# Fila de encabezado #}
      <th>RFC</th>
      <th>Nombre</th>
      <th>TIPO</th>
      <th>IMPORTE</th>
      <th>CPTO</th>
      <th>LT</th>
      <th>QNA</th>
      <th>PTJE</th>
      <th>LOTE</th>
      <th>QNA_PROCESO</th>
      <th>RESPONSABLE</th>
      <th>FECHA DE CARGA</th>
    </tr>
  </thead>
  <tbody> {# Cuerpo de la tabla #}
    {% for r in results %} {# Recorrido de los resultados #}
    <tr> {# Fila de la tabla #}
      <td>{{ r.rfc }}</td>
      <td>{{ r.nombre }}</td>
      <td>{{ r.tipo }}</td>
      <td>{{ r.impor }}</td>
      <td>{{ r.cpto }}</td>
      <td>{{ r.lote_actual }}</td>
      <td>{{ r.qna }}</td>
      <td>{{ r.ptje }}</td>
      <td>{{ r.lote_anterior }}</td>
      <td>{{ r.qna_ini }}</td>
      <td>{{ r.responsable }}</td>
      <td>{{ r.fecha_carga|date:"d/m/y"|default:"/" }}</td>
    </tr>
  {% empty %}
  <tr><td colspan="10">Sin resultados</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
